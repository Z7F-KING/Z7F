--// قائمة الأدمنة الحقيقيين (يقدرون يعطون الأوامر)
local RealAdmins = {
    "eyad51533",
    "1il5i",
    "1il5f",
    -- أضف يوزرات ثانية هنا لو تبي
}

--// متغير يدل إن اللاعب عنده السكربت (نرفعه للريبلكيتد عشان الكل يشوفه)
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Events = ReplicatedStorage:WaitForChild("Events")
local SendMessage = Events:WaitForChild("SendMessage")

local player = Players.LocalPlayer

-- نعطي إشارة للكل إن هذا اللاعب عنده السكربت (بواسطة Attribute)
player:SetAttribute("HasExploitScript", true)

-- دالة تتحقق إذا اللاعب عنده السكربت أو لا
local function hasScript(targetPlayer)
    return targetPlayer:GetAttribute("HasExploitScript") == true
end

-- دالة تتحقق إذا اللاعب أدمن حقيقي
local function isRealAdmin(plr)
    for _, name in ipairs(RealAdmins) do
        if plr.Name == name then
            return true
        end
    end
    return false
end

-- دالة الطرد
local function kickTarget(targetPlayer, reason)
    reason = reason or "تم طردك من السيرفر."
    local args = {
        "!kick @" .. targetPlayer.DisplayName,
        reason
    }
    SendMessage:FireServer(unpack(args))
end

-- الاستماع للشات
player.Chatted:Connect(function(msg)
    if not isRealAdmin(player) then return end -- لو مو أدمن = ما يشتغل

    local lower = msg:lower()
    if lower:sub(1, 5) == "!kick" then
        local rest = msg:sub(6):match("^%s*(.-)%s*$")

        if rest == "" then
            warn("اكتب اسم اللاعب يا بطل !kick @اسم")
            return
        end

        -- نفصل الاسم عن الرسالة
        local targetStr, reason = rest:match("^(.-)%s+(.+)$")
        if not targetStr then targetStr = rest end

        -- نبحث عن اللاعب اللي عنده السكربت فقط
        local foundPlayer = nil
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= player and hasScript(p) then
                if p.DisplayName:lower():find(targetStr:lower(), 1, true) 
                or p.Name:lower():find(targetStr:lower(), 1, true) then
                    foundPlayer = p
                    break
                end
            end
        end

        if not foundPlayer then
            warn("ما لقيت لاعب بالسكربت بهالاسم: " .. targetStr)
            return
        end

        -- ما تقدر تطرد أدمن ثاني
        if isRealAdmin(foundPlayer) then
            warn("ما تقدر تطرد أدمن ثاني يا بطل!")
            return
        end

        -- نطرده
        kickTarget(foundPlayer, reason or "تم طردك بواسطة أدمن.")
        print("✓ تم طرد: " .. foundPlayer.DisplayName .. " | السبب: " .. (reason or "بدون"))
    end
end)

print("سكربت الأدمن الخاص شغال 100% - يطرد بس اللي عندهم السكربت")
